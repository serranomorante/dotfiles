---
- name: "Dotfiles: ensure stow installed"
  ansible.builtin.package:
    state: present
    name: stow

- name: "Dotfiles: ensure nvim pack folder"
  ansible.builtin.file:
    state: directory
    recurse: true
    path: ~/.config/nvim/pack/

- name: "Dotfiles: apply stow"
  ansible.builtin.command: >
    stow --dotfiles
    dunst
    fish
    gnupg
    kitty
    lazygit
    nvim
    peripherals
    pipewire
    playbooks
    systemd
    tmux
    wireplumber
    home
    utilities
    PKM
  args:
    chdir: ~/dotfiles
  changed_when: false
