---
- name: "{{ item }} peripheral: ensure sxhkd is present"
  become: true
  ansible.builtin.package:
    state: present
    name: sxhkd

- name: "{{ item }} peripheral: enable service sxhkd and ensure is not masked"
  ansible.builtin.systemd_service:
    scope: user
    state: started
    name: sxhkd
    enabled: true
    masked: no

- name: "{{ item }} peripheral: ensure keyd is present"
  ansible.builtin.package:
    state: present
    name: keyd

- name: "{{ item }} peripheral: enable service keyd and ensure is not masked"
  ansible.builtin.systemd_service:
    name: keyd
    enabled: true
    masked: no

- name: "{{ item }} peripheral: copy keyd default.conf file"
  become: true
  ansible.builtin.copy:
    src: "{{ home_path }}/.config/keyd/default.conf"
    dest: /etc/keyd/default.conf
    owner: root
